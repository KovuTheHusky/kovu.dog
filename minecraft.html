---
layout: page
title: Minecraft
subtitle: "Timeline, connection details, world downloads, maps."
permalink: /minecraft
---

<style>
  .chart-background {
    height: 61.5px;
  }

  .tickrate-background {
    background: linear-gradient(
      to bottom,
      rgba(40, 167, 69, 0.25) 0%,
      rgba(40, 167, 69, 0.25) 12.5%,
      rgba(220, 53, 69, 0.25) 12.5%,
      rgba(220, 53, 69, 0.25) 100%
    );
  }

  .ticktime-background {
    background: linear-gradient(
      to bottom,
      rgba(220, 53, 69, 0.25) 0%,
      rgba(220, 53, 69, 0.25) 25%,
      rgba(40, 167, 69, 0.25) 25%,
      rgba(40, 167, 69, 0.25) 100%
    );
  }
</style>
<div class="container">
  <div class="card" style="margin-bottom: 66px">
    <div class="card-body justify-content-center align-items-center">
      <div id="overlay">
        <div
          class="w-100 d-flex justify-content-center align-items-center h-100"
        >
          <div
            class="spinner-border text-primary"
            role="status"
            style="
              margin: auto;
              display: flex;
              position: absolute;
              width: 3rem;
              height: 3rem;
            "
          >
            <span class="visually-hidden">Loading&mldr;</span>
          </div>
        </div>
      </div>
      <h5 class="card-title">
        Survival
        <span id="status" class="badge" style="visibility: hidden"
          >Loading&mldr;</span
        >
      </h5>
      <p class="card-text align-middle">
        A world started in version 1.21.11. No world download is available at
        this time, but a live map is.
      </p>
    </div>
    <div class="row">
      <div class="col-sm-6 col-left">
        <ul id="live" class="list-group list-group-flush">
          <li class="list-group-item d-flex justify-content-between">
            Version<span id="version"></span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            Day<span id="day"></span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            Time<span id="time"></span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            Weather<span id="weather"></span>
          </li>
          <li
            class="list-group-item d-flex justify-content-between"
            style="border-bottom: 0"
          >
            Tickrate<span id="tickrate"></span>
          </li>
          <li
            id="tickrate-item"
            class="list-group-item chart-background"
            style="border-top: 0; padding-top: 0"
          >
            <canvas id="tickrate-chart" height="30"></canvas>
          </li>
          <li
            class="list-group-item d-flex justify-content-between"
            style="border-bottom: 0"
          >
            Ticktime<span id="ticktime"></span>
          </li>
          <li
            id="ticktime-item"
            class="list-group-item chart-background"
            style="border-top: 0; padding-top: 0"
          >
            <canvas id="ticktime-chart" height="30"></canvas>
          </li>
        </ul>
      </div>
      <div class="col-sm-6 col-right">
        <ul id="live-playerlist" class="list-group list-group-flush">
          <li
            id="playercount"
            class="list-group-item d-flex justify-content-between"
          >
            Players<span id="players"></span>
          </li>
        </ul>
      </div>
    </div>
    <div class="card-body" style="border-top: 1px solid #808080">
      <a
        href="#"
        data-bs-toggle="modal"
        data-bs-target="#modal"
        class="btn btn-primary disabled remote"
        >Connect</a
      >
      <a href="https://minecraft.{{ site.hostname }}" class="btn btn-secondary"
        >Live Map</a
      >
      <a href="https://discord.gg/w3XaDVBF7K" class="btn btn-secondary"
        >Discord</a
      >
    </div>
  </div>
</div>
<div id="timeline" class="gmb" style="height: 378px"></div>
<div class="container">
  <div id="masonry" class="row" data-masonry='{"percentPosition": true }'>
    {% for world in site.data.minecraft %}
    <div class="col-sm-6 mb-4">
      <div class="card">
        {% if world.image %}
        <img src="/images/{{ world.image }}" class="card-img-top" alt="" />
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">
            {{ world.title }} {% if world.badge %}
            <span class="badge bg-{{ world.badge.color }}"
              >{{ world.badge.label }}</span
            >
            {% endif %} {% if world.icon %}
            <img
              class="float-right"
              src="/images/{{ world.icon }}"
              alt="{{ world.title }}"
              style="width: 24px; height: 24px; vertical-align: top"
            />
            {% endif %}
          </h5>
          <p class="card-text align-middle">{{ world.description }}</p>
        </div>
        {% if world.list %}
        <ul id="live" class="list-group list-group-flush">
          {% for item in world.list %}
          <li class="list-group-item d-flex justify-content-between">
            {{ item.label }}<span
              id="{{ item.id }}"
              {%
              if
              item.popover
              %}
              data-bs-toggle="popover"
              data-content="{{ item.popover }}"
              data-html="true"
              {%
              endif
              %}
              >{{ item.text }}</span
            >
          </li>
          {% endfor %}
        </ul>
        {% endif %}
        <div class="card-body">
          {% for button in world.buttons %}
          <a
            href="{{ button.link }}"
            class="btn {% if button.primary %}btn-primary{% else %}btn-secondary{% endif %}"
            >{{ button.label }}</a
          >
          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<div
  class="modal fade"
  id="modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="modalTitle"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitle">Connect</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <p class="mb-3">
          To connect to the server, log into Minecraft, select Multiplayer from
          the main menu, click the Add Server button, and enter the server
          address below.
        </p>
        <div class="input-group">
          <span class="input-group-text" style="min-width: 80px">Server</span>
          <input
            type="text"
            class="form-control"
            onclick="this.select()"
            value="{{ site.hostname }}"
            readonly
          />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<script src="/node_modules/chart.js/dist/chart.umd.js"></script>

<script>
  let script = document.createElement("script");

  script.src = "https://www.gstatic.com/charts/loader.js";
  document.head.append(script);

  script.onload = function () {
    google.charts.load("current", { packages: ["timeline"] });
    google.setOnLoadCallback(drawChart);
    var chart;
    var data;
    var options;

    function drawChart() {
      var container = document.getElementById("timeline");
      chart = new google.visualization.Timeline(container);
      data = new google.visualization.DataTable();
      data.addColumn({ type: "string", id: "Order" });
      data.addColumn({ type: "string", id: "Name" });
      data.addColumn({ type: "date", id: "Start" });
      data.addColumn({ type: "date", id: "End" });
      data.addRows([
        [
          "Online",
          "Survival 2011",
          new Date(2011, 1, 11),
          new Date(2011, 8, 15),
        ],
        [
          "Online",
          "Survival 2012",
          new Date(2011, 8, 15),
          new Date(2012, 2, 1),
        ],
        [
          "Online",
          "Creative 2012",
          new Date(2011, 8, 15),
          new Date(2012, 2, 1),
        ],
        [
          "Online",
          "Survival 2013",
          new Date(2012, 2, 12),
          new Date(2013, 9, 12),
        ],
        [
          "Online",
          "Survival 2022",
          new Date(2013, 11, 3),
          new Date(2022, 4, 9),
        ],
        ["Online", "Forge 2015", new Date(2015, 11, 29), new Date(2016, 5, 17)],
        [
          "Online",
          "Survival 2025",
          new Date(2023, 0, 7),
          new Date(2025, 0, 28),
        ],
        ["Online", "Survival LIVE", new Date(2026, 0, 19), new Date()], // 23
      ]);
      options = {
        backgroundColor: "#121212",
        timeline: { showRowLabels: false, groupByRowLabel: false },
      };
      chart.draw(data, options);
    }
    var previousWidth = $("#timeline").width();
    window.addEventListener(
      "resize",
      function () {
        if ($("#timeline").width() !== previousWidth) {
          previousWidth = $("#timeline").width();
          chart.draw(data, options);
        }
      },
      false,
    );
  };
</script>

<script>
  const moonIcons = {
    full_moon: "ðŸŒ•",
    waning_gibbous: "ðŸŒ–",
    last_quarter: "ðŸŒ—",
    waning_crescent: "ðŸŒ˜",
    new_moon: "ðŸŒ‘",
    waxing_crescent: "ðŸŒ’",
    first_quarter: "ðŸŒ“",
    waxing_gibbous: "ðŸŒ”",
  };

  var players = [];
  var charttickrate = null;
  var chartticktime = null;

  var lastServerTime = 0;
  var lastServerDay = 0;
  var lastServerMoon = "new_moon";
  var lastUpdateTimestamp = 0;
  var isOnline = false;

  function formatMinecraftTime(ticks) {
    var hour = Math.floor((ticks / 1000 + 6) % 24);
    var minute = Math.floor((ticks % 1000) / (16 + 2 / 3));
    return (
      (hour < 10 ? "0" + hour : hour) +
      ":" +
      (minute < 10 ? "0" + minute : minute)
    );
  }

  function updateTwemoji(id) {
    if (typeof twemoji !== "undefined") {
      twemoji.parse(document.getElementById(id), {
        folder: "svg",
        ext: ".svg",
      });
    }
  }

  function smoothUpdate() {
    if (!isOnline) return;
    var msSinceUpdate = Date.now() - lastUpdateTimestamp;
    var tickOffset = (msSinceUpdate / 1000) * 20;
    var estimatedTime = lastServerTime + tickOffset;
    if (estimatedTime >= 24000) estimatedTime = estimatedTime % 24000;

    var timeIcon =
      estimatedTime >= 0 && estimatedTime < 12000
        ? "â˜€ï¸"
        : moonIcons[lastServerMoon] || "ðŸŒ™";

    $("#time").text(timeIcon + " " + formatMinecraftTime(estimatedTime));
    updateTwemoji("time");
  }

  function refresh() {
    $.getJSON(
      "https://api.{{ site.hostname }}/minecraft.json",
      function (data) {
        $("#overlay").hide();
        isOnline = true;
        $("#status")
          .text("Online")
          .css("visibility", "visible")
          .addClass("bg-success")
          .removeClass("bg-danger");
        $(".remote").removeClass("disabled");

        $("#tickrate-item").addClass("tickrate-background");
        $("#ticktime-item").addClass("ticktime-background");

        $("#version").text(data["Info"]["Version"]);
        lastServerTime = data["Time"];
        lastServerDay = data["Day"];
        lastServerMoon = data["Moon"];
        lastUpdateTimestamp = Date.now();
        $("#day").text(Number(lastServerDay).toLocaleString());

        const weatherIcons = { clear: "â˜€ï¸", rain: "ðŸŒ§ï¸", thunder: "â›ˆï¸" };
        let wLabel =
          data["Weather"].charAt(0).toUpperCase() + data["Weather"].slice(1);
        $("#weather").text(
          (weatherIcons[data["Weather"]] || "â“") + " " + wLabel,
        );
        updateTwemoji("weather");

        $("#tickrate").text(
          data.Tickrate[data.Tickrate.length - 1].toFixed(2) + "/s",
        );
        $("#ticktime").text(
          data.Ticktime[data.Ticktime.length - 1].toFixed(2) + "ms",
        );
        $("#players").text(
          data["Info"]["Players"] + " / " + data["Info"]["MaxPlayers"],
        );

        var join = $(data.Players).not(players).get();
        var part = $(players).not(data.Players).get();
        $.each(join, function (key, value) {
          $("#live-playerlist").append(
            '<li class="list-group-item d-flex align-items-center justify-content-end player player-' +
              value +
              '"><img src="https://crafthead.net/helm/' +
              value +
              '/16" class="rounded me-1" style="width: 24px; height: 24px; image-rendering: pixelated;">' +
              value +
              "</li>",
          );
        });
        $.each(part, function (key, value) {
          $(".player-" + value).remove();
        });
        players = data.Players;

        const getOpts = (min, max) => ({
          animation: false,
          elements: { line: { borderWidth: 2 }, point: { radius: 0 } },
          plugins: { legend: { display: false } },
          scales: { x: { display: false }, y: { display: false, min, max } },
        });
        var labels = Array.from({ length: 60 }, (_, i) => i);

        if (charttickrate) charttickrate.destroy();
        charttickrate = new Chart(document.getElementById("tickrate-chart"), {
          type: "line",
          data: {
            labels,
            datasets: [
              { data: data.Tickrate, borderColor: "#ffffff", fill: false },
            ],
          },
          options: getOpts(-2, 22),
        });

        if (chartticktime) chartticktime.destroy();
        chartticktime = new Chart(document.getElementById("ticktime-chart"), {
          type: "line",
          data: {
            labels,
            datasets: [
              { data: data.Ticktime, borderColor: "#ffffff", fill: false },
            ],
          },
          options: getOpts(-5, 55),
        });
      },
    ).fail(function () {
      isOnline = false;
      $("#overlay").hide();
      $("#status")
        .text("Offline")
        .css("visibility", "visible")
        .addClass("bg-danger")
        .removeClass("bg-success");
      $(".remote").addClass("disabled");

      $("#tickrate-item").removeClass("tickrate-background");
      $("#ticktime-item").removeClass("ticktime-background");

      $("#tickrate, #ticktime, #version, #day, #time, #weather, #players").text(
        "Offline",
      );
      $(".player-").remove();
      if (charttickrate) {
        charttickrate.destroy();
        charttickrate = null;
      }
      if (chartticktime) {
        chartticktime.destroy();
        chartticktime = null;
      }
    });
  }

  $(document).ready(function () {
    $.ajaxSetup({ cache: false });
    refresh();
    setInterval(refresh, 1000);
    setInterval(smoothUpdate, 100);
  });
</script>

<script>
  $(document).ready(function () {
    var image_url =
      "https://crafthead.net/helm/1df71bbb2d0b49c5b6bf6ca2d0cf30da/16";
    $.get(image_url).done(function () {
      $("img[src|='/images/minecraft/campppy.webp']").attr(
        "src",
        "https://crafthead.net/helm/1df71bbb2d0b49c5b6bf6ca2d0cf30da/16",
      );
    });
    var image_url =
      "https://crafthead.net/helm/78f39b2acfa843c3b9b9bce19f840cf0/16";
    $.get(image_url).done(function () {
      $("img[src|='/images/minecraft/Cujo27.webp']").attr(
        "src",
        "https://crafthead.net/helm/78f39b2acfa843c3b9b9bce19f840cf0/16",
      );
    });
    var image_url =
      "https://crafthead.net/helm/23583b2b7a8742bbbf2b36d5070fdcb5/16";
    $.get(image_url).done(function () {
      $("img[src|='/images/minecraft/KovuTheHusky.webp']").attr(
        "src",
        "https://crafthead.net/helm/23583b2b7a8742bbbf2b36d5070fdcb5/16",
      );
    });
    var image_url =
      "https://crafthead.net/helm/08bb1b6b8d904692a2dc56e032f3b331/16";
    $.get(image_url).done(function () {
      $("img[src|='/images/minecraft/NightWolf1298.webp']").attr(
        "src",
        "https://crafthead.net/helm/08bb1b6b8d904692a2dc56e032f3b331/16",
      );
    });
  });
</script>
